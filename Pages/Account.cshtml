@page
@model AccountModel
@{
    ViewData["Title"] = "Account";
}

<div class="form-container">
    <div class="form-card">
        <div class="form-title">Account Settings</div>
        @if (!string.IsNullOrEmpty(Model.Message))
        {
            <div class="form-message-error">@Model.Message</div>
        }
        <form method="post" class="form">
            <label asp-for="Input.NewEmail"></label>
            <input asp-for="Input.NewEmail" type="email" autocomplete="email" placeholder="New Email" />
            <span asp-validation-for="Input.NewEmail" class="text-danger"></span>

            <label asp-for="Input.CurrentPassword"></label>
            <input asp-for="Input.CurrentPassword" type="password" autocomplete="current-password" placeholder="Current Password" />
            <span asp-validation-for="Input.CurrentPassword" class="text-danger"></span>

            <label asp-for="Input.NewPassword"></label>
            <input asp-for="Input.NewPassword" type="password" autocomplete="new-password" placeholder="New Password (optional)" />
            <span asp-validation-for="Input.NewPassword" class="text-danger"></span>

            <button type="submit">Update Account</button>
        </form>

        <hr style="margin:2rem 0 1rem 0;" />

        <div class="form-title" style="font-size:1.2rem;">Select Your Team</div>
        @if (!string.IsNullOrEmpty(Model.TeamMessage))
        {
            <div class="form-message-error">@Model.TeamMessage</div>
        }
        <form method="post" asp-page-handler="SelectTeam" class="form">
            <label for="teamSelect">Team</label>
            <select id="teamSelect" asp-for="SelectedTeamId">
                <option value="">-- Select a team --</option>
                @foreach (var team in Model.Teams)
                {
                    <option value="@team.Id" selected="@(Model.SelectedTeamId == team.Id ? "selected" : null)">@team.Name</option>
                }
            </select>
            <button type="submit">Save Team</button>
        </form>
    </div>
</div>

@section Scripts {
    <partial name="_ValidationScriptsPartial" />
}